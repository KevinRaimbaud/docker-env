#!/usr/bin/env bash

# $0 is the script name, $1 id the first ARG, $2 is second...
remove="$1"
build="yes"

# Check Argument
if [ "$remove" = "rm" ]; then
    echo "Deleting every containers"
    docker rm -f $(docker ps -a -q)

elif [ "$remove" = "rmi" ]; then
    echo "Deleting every containers and images"
    docker rm -f $(docker ps -a -q)
    docker rmi -f $(docker images -q)

elif [ "$remove" = "" ]; then
    build="yes"
else
    echo "Argument '$remove' not valid"
    exit
fi

# Build Process
if [ "$build" = "yes" ]; then
    # Build and Start Docker containers
    docker-compose up -d
    # Go in the container
    docker exec -ti nginx bash
fi